<script>
  function hideLoaderAndShowContent() {
    const loader = document.getElementById("loader");
    const content = document.getElementById("page-content");

    if (loader) loader.style.display = "none";
    if (content) content.classList.remove("opacity-0");
  }

  window.addEventListener("load", hideLoaderAndShowContent);
  window.addEventListener("pageshow", hideLoaderAndShowContent); // handles back/forward cache

  document.querySelectorAll("a[href]").forEach((link) => {
    link.addEventListener("click", function (e) {
      const href = this.getAttribute("href");

      if (!href.startsWith("/")) return;

      e.preventDefault();

      const loader = document.getElementById("loader");
      if (loader) loader.style.display = "flex";

      setTimeout(() => {
        window.location.href = href;
      }, 500);
    });
  });
</script>
